{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}{% endblock %}</h1>
{% endblock %}

{% block content %}
<div class="container-fluid" style="margin:0 125px;">
    <div class="row">
        <div class="col-lg-6">
            <h2 style="font-family:Vision-Bold; margin-left:15px;">Matches</h2>
        </div>
    </div>
    <br>
    {% for match, photo, age, last_message in matches %}
        <div class="row-fluid">
            <div class="col-lg-6">
                <div class="inline-block list-item-box" style="width:80%; padding:10px">
                    <a class="user-list" href="{{ url_for('profile_bp.send_message', user_id=match.id) }}">
                        <img style="margin:20px 20px 20px 0;" class="inline-block cropped-img-cir" src="{{ photo }}" alt="profile photo">
                        <div class="inline-block">
                            <h3>{{ match.username }}, {{ age }}</h3>
                            {% if last_message %}
                                <p class="inline-block" style="color:#888;">
                                    {{ last_message.timestamp.time().strftime('%H:%M') }}
                                </p>
                                {% if last_message.text|length > 30 %}
                                    <p class="inline-block" >{{ last_message.text[:30] }}...</p>
                                {% else %}
                                    <p class="inline-block" >{{ last_message.text }}</p>
                                {% endif %}
                            {% else %}
                                <p class="inline-block" style="color:#333;">
                                    No messages yet
                                </p>
                            {% endif %}
                        </div>
                    </a>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}